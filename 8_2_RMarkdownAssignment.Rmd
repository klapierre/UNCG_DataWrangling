---
title: "TEMPEST: Understory Plant Community Responses to Coastal Flooding"
author: "Stephanie Mota"
date: "2023-04-05"
output: pdf_document
---

```{r, setup, include=FALSE}
library(tidyr)
library(dplyr)
```


## Background

When it rains it pours. With global warming in the mix, the weather we receive is increasing in intensity. To figure out how badly our ecosystems will be affected, scientists ran an experiment called [TEMPEST](https://sercblog.si.edu/tempest-experiment-mimics-future-storms-inside-forests/).

This experiment mimics the growing intensity which global warming brings to our weather. They studied how weather would affect the forests as time goes on.

## Code

First you want to load in your file.

Then you want to create your two data frames:
1) A plants species list
2) Treatment information (Control, Freshwater, Saltwater)

```{r}
TEMP_raw <- read.csv("TEMPEST_SERC_understory sppcomp_2021.csv")
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
TEMP_species <- TEMP_raw %>% 
  select(species, cover) %>% 
  distinct(.keep_all = TRUE) %>%
  mutate(species = ifelse(species=="canopy tree basal cover", NA, ifelse(species==
         "infrastructure cover",NA, ifelse(species=="bare ground", NA, species))))%>%
  filter(!is.na(species))

knitr::opts_chunk$set(echo = TRUE)
```

```{r}
TEMP_treat <- TEMP_raw %>% 
  mutate(replicate = paste(plot, subplot, sep="_")) %>%
  mutate(treatment = ifelse(plot %in% "C", "Control",plot)) %>% 
  mutate(treatment = ifelse(plot %in% "F", "Freshwater inundation",treatment)) %>% 
  mutate(treatment = ifelse(plot %in% "S", "Saltwater inundation", treatment)) %>% 
  select(-c("project_name", "sampler","notes","species","plot","subplot")) 

knitr::opts_chunk$set(echo = TRUE)
```

Calculate the total herbaceous plant cover (remove non-plants) for each subplot in a new data frame, removing any "additional" species. The join that data frame back onto the original cover data. Calculate the relative cover for each species as 100*(species cover/total cover).


Make two new data frames:
1) In one dataframe, calculate plant species richness (the total number of plant species) for each subplot. Then find the mean and standard error of subplot species richness for each plot.
2) In another dataframe, calculate plant species richness at the plot level (including the additional species not found in the subplot data).


Make two figures, giving each one a title to distinguish the two in your output and intelligibly labeling axes:
1) Bar graph of richness per plot (plot on x-axis) showing the mean and standard error across subplots.
2) Another bar graph showing the richness at the plot level (plot on x-axis).
